- summary: |
    Регистрация нового пользователя через GitHub OAuth
  requirement: |
    У пользователя должна быть возможность зарегистрироваться через GitHub
  prerequisites: |
    Имеется аккаунт на GitHub, открыта главная страница Codebattle
  test-data: |
    Аккаунт GitHub с подтверждённой почтой
  steps:
    - Нажать кнопку "Sign in with GitHub"
    - Разрешить доступ приложению в окне авторизации GitHub
    - Вернуться на сайт Codebattle
  expected-result: |
    Пользователь авторизован, видит свой профиль и доступ к функциям сайта

- summary: |
    Создание игры против бота
  requirement: |
    У пользователя должна быть возможность создать игру против бота
  prerequisites: |
    Пользователь авторизован, открыта главная страница
  test-data: |
    Уровень сложности: легкий
  steps:
    - Нажать кнопку "Create a battle"
    - В "Game type" выбрать "With a bot"
    - Выбрать уровень сложности
    - Выбрать задание (рандомное)
    - Нажать кнопку "Create battle"
  expected-result: |
    Открывается игровая комната с редактором кода и задачей

- summary: |
    Присоединение к существующей игре со случайным соперником
  requirement: |
    У пользователя должна быть возможность играть против случайного соперника
  prerequisites: |
    Пользователь авторизован, открыта главная страница
  test-data: |
    В системе есть доступные для присоединения игры
  steps:
    - Нажать кнопку "Join a Battle"
    - В открывшемся окне выбрать игру с подходящим уровенм сложности и языком программирования
    - Нажать кнопку "Fight"
  expected-result: |
    Пользователь попадает в выбранную игровую комнату с соперником
    Начинается отсчет времени, доступен редактор кода и задача

- summary: |
    Создание игры с другом по ссылке
  requirement: |
    У пользователя должна быть возможность создать игру против друга по ссылке
  prerequisites: |
    Пользователь авторизован, открыта главная страница
  test-data: |
    Два разных аккаунта
  steps:
    - Нажать кнопку "Create a battle"
    - В "Game type" выбрать "With other user"
    - Нажать кнопку "Create battle"
    - Скопировать ссылку на игру
    - Открыть ссылку в другом браузере/аккаунте
    - Начать игру
  expected-result: |
    Оба пользователя попадают в одну игровую комнату

- summary: |
    Выбор языка программирования в игре
  requirement: |
    У пользователя должна быть возможность выбрать язык программирования для решения задачи
  prerequisites: |
    Открыта игровая комната
  test-data: |
    Языки: NodeJS, Python, Java, Ruby
  steps:
    - Найти выпадающий список выбора языка
    - Выбрать "NodeJS"
    - Проверить подсветку синтаксиса
    - Выбрать другой язык
  expected-result: |
    Подсветка синтаксиса меняется в соответствии с выбранным языком

- summary: |
    Набор кода в редакторе с подсветкой синтаксиса
  requirement: |
    У пользователя должна быть возможность писать код в редакторе с подсветкой синтаксиса
  prerequisites: |
    Открыта игровая комната, выбран язык программирования JavaScript/NodeJS
  test-data: |
    Код: function solution(a, b) { return a + b; }
  steps:
    - Ввести код в редактор
    - Наблюдать за подсветкой ключевых слов, скобок, строк
  expected-result: |
    Код подсвечивается в соответствии с синтаксисом выбранного языка

- summary: |
    Запуск тестов для проверки решения
  requirement: |
    У пользователя должна быть возможность запустить тесты для проверки своего решения
  prerequisites: |
    Открыта игровая комната, введён код решения
  test-data: |
    Код решения задачи на вычисление площади прямоугольника
  steps:
    - Ввести корректный код решения в редактор
    - Нажать кнопку "Run"
    - Дождаться выполнения
  expected-result: |
    Отображается результат тестов: все тесты пройдены или показаны ошибки

- summary: |
    Просмотр прогресса решения соперника
  requirement: |
    У пользователя должна быть возможность видеть прогресс решения соперника
  prerequisites: |
    Два авторизованных пользователя (или две вкладки/браузера), открыта игровая комната
  test-data: |
    Пользователь 1 и пользователь 2
  steps:
    - Пользователь 1 начинает писать код в своём редакторе
    - Пользователь 2 наблюдает за интерфейсом
    - Пользователь 1 нажимает кнопку проверки решения (неверное решение)
    - Пользователь 2 наблюдает за изменением статуса
    - Пользователь 1 вводит верное решение и нажимает проверку
    - Пользователь 2 наблюдает за финальным статусом
  expected-result: |
    У пользователя 2 корректно отображаются действия пользвателя 1:
    - видит написание кода соперником
    - видит, что противник отправил решение (после первой проверки)
    - видит, что противник победил (после верного решения)

- summary: |
    Общение с соперником в чате во время игры
  requirement: |
    У пользователя должна быть возможность общаться с соперником в чате во время игры
  prerequisites: |
    Открыта игровая комната, есть соперник
  test-data: |
    Сообщение: "Привет! Удачи в решении!"
  steps:
    - Найти поле ввода чата
    - Ввести сообщение
    - Нажать Enter или кнопку отправки
  expected-result: |
    Сообщение отображается в истории чата у обоих игроков

- summary: |
    Просмотр рейтинга и статистики
  requirement: |
    У пользователя должна быть возможность просматривать свой рейтинг и статистику
  prerequisites: |
    Пользователь авторизован, сыграно несколько игр
  test-data: |
    Аккаунт с историей игр
  steps:
    - Нажать на свою аватарку в шапке сайта справа
    - Перейти в раздел "My Profile"
    - Проверить отображение рейтинга
    - Проверить статистику (побед/поражений)
  expected-result: |
    Отображается текущий рейтинг и статистика игр

- summary: |
    Просмотр истории сыгранных игр
  requirement: |
    У пользователя должна быть возможность просматривать историю сыгранных игр
  prerequisites: |
    Пользователь авторизован, сыграно несколько игр
  test-data: |
    Аккаунт с историей игр
  steps:
    - Нажать на свою аватарку в шапке сайта
    - Перейти в раздел "My Profile"
    - Открыть вкладку "Completed games"
    - Открыть запись одной из игр (кнопка "Show" напротив игры)
  expected-result: |
    Отображается список прошлых игр с возможностью просмотра записи

- summary: |
    Локализация сайта на русский язык
  requirement: |
    У пользователя должна быть возможность использовать сайт на русском языке
  prerequisites: |
    Открыта главная страница сайта
  test-data: |
    Текущий язык: английский
  steps:
    - Нажать на свою аватарку в шапке сайта
    - Перейти в раздел "Settings"
    - В селекторе "Locale" выбрать русский язык
    - Обновить страницу
  expected-result: |
    Весь интерфейс переведён на русский язык, выбор сохраняется

- summary: |
    Локализация сайта на английский язык
  requirement: |
    У пользователя должна быть возможность использовать сайт на английском языке
  prerequisites: |
    Открыта главная страница сайта
  test-data: |
    Текущий язык: русский
  steps:
    - Нажать на свою аватарку в шапке сайта
    - Перейти в раздел "Settings"
    - В селекторе "Locale" выбрать английский язык
    - Обновить страницу
  expected-result: |
    Весь интерфейс переведён на английский язык, выбор сохраняется

- summary: |
    Проверка использования HTTPS и GitHub OAuth
  requirement: |
    Сайт должен быть безопасным (аутентификация через GitHub OAuth, защита данных пользователя)
  prerequisites: |
    Открыта главная страница
  test-data: |
    URL сайта
  steps:
    - Проверить наличие HTTPS в адресной строке
    - Нажать "Sign in with GitHub"
    - Проверить, что открывается страница авторизации GitHub
    - Проверить URL авторизации (должен быть https://github.com)
  expected-result: |
    Сайт использует HTTPS, авторизация проходит через официальный GitHub OAuth

- summary: |
    Проверка стабильности при одновременной игре
  requirement: |
    Сайт должен быть способен обрабатывать активное использование (не падает при одновременной игре 2+ пользователей)
  prerequisites: |
    Два авторизованных пользователя, два устройства/вкладки
  test-data: |
    Пользователь A и Пользователь B
  steps:
    - Оба пользователя создают игру против бота одновременно
    - Оба пишут код в редакторах
    - Оба запускают тесты
  expected-result: |
    Система не падает, оба пользователя могут продолжать игру без ошибок

- summary: |
    Проверка скорости загрузки главной страницы
  requirement: |
    Страницы сайта должны загружаться за 3-5 секунд
  prerequisites: |
    Стабильное интернет-соединение, очищен кеш браузера
  test-data: |
    Скорость интернета: 10 Мбит/с
  steps:
    - Открыть DevTools браузера (F12)
    - Перейти на вкладку Network
    - Обновить страницу Codebattle
    - Зафиксировать время загрузки (Load)
  expected-result: |
    Время загрузки страницы не превышает 5 секунд

- summary: |
    Проверка скорости работы редактора кода
  requirement: |
    Редактор кода должен работать без задержек при вводе
  prerequisites: |
    Открыта игровая комната
  test-data: |
    Быстрый набор текста: "const solution = (a, b) => a + b;"
  steps:
    - Быстро вводить код в редактор
    - Наблюдать за отображением символов
  expected-result: |
    Символы появляются мгновенно, нет видимой задержки при вводе

- summary: |
    Проверка корректного отображения сайта в браузере Google Chrome
  requirement: |
    Сайт нужно протестировать на совместимость с последними версиями браузеров
  prerequisites: |
    Установлен Google Chrome последней версии
  test-data: |
    Google Chrome версии 120+
  steps:
    - Открыть главную страницу Codebattle в Google Chrome
    - Проверить, что страница загружается полностью
    - Проверить, что все элементы интерфейса отображаются (шапка, кнопки, текст)
    - Проверить отсутствие ошибок в консоли разработчика (F12 → Console)
  expected-result: |
    Сайт корректно отображается в Google Chrome, нет ошибок загрузки

- summary: |
    Проверка корректного отображения сайта в браузере Mozilla Firefox
  requirement: |
    Сайт нужно протестировать на совместимость с последних версий браузеров
  prerequisites: |
    Установлен Mozilla Firefox последней версии
  test-data: |
    Mozilla Firefox версии 120+
  steps:
    - Открыть главную страницу Codebattle в Mozilla Firefox
    - Проверить, что страница загружается полностью
    - Проверить, что все элементы интерфейса отображаются
    - Проверить отсутствие ошибок в консоли разработчика (Ctrl+Shift+K → Console)
  expected-result: |
    Сайт корректно отображается в Mozilla Firefox, нет ошибок загрузки

- summary: |
    Проверка адаптивности сайта
  requirement: |
    Сайт должен быть доступен на различных устройствах
  prerequisites: |
    Открыт сайт в браузере с DevTools
  test-data: |
    Мобильное разрешение для проверки: 390х844
  steps:
    - Открыть DevTools (F12)
    - Выбрать разрешение 390х844
    - Проверить отображение главной страницы
    - Проверить отсутствие горизонтальной прокрутки
    - Проверить размеры кнопок (достаточны для касания)
    - Проверить доступность основных элементов
  expected-result: |
    Сайт корректно отображается, интерфейс адаптируется под мобильные устройства, все элементы доступны и удобны для использования

- summary: |
    Проверка скорости работы сайта
  requirement: |
    Сайт нужно оптимизировать для скорости работы
  prerequisites: |
    Открыта главная страница
  test-data: |
    DevTools Performance tab
  steps:
    - Открыть DevTools → Performance
    - Начать запись
    - Совершить типовые действия, перейти в профиль, создать игру
    - Остановить запись и проанализировать метрики
  expected-result: |
    Время отклика интерфейса не превышает 200 мс для основных действий

- summary: |
    Переподключение к игре после разрыва соединения
  requirement: |
    У пользователя должна быть возможность переподключиться к игре при разрыве соединения
  prerequisites: |
    Пользователь авторизован, игра активна, соединение прервано
  steps:
    - Отключиться от интернета (или эмулировать разрыв)
    - Восстановить соединение
    - Обновить страницу или перейти по ссылке на игру
  expected-result: |
    Пользователь возвращается в ту же игру, код и состояние восстановлены

- summary: |
    Блокировка кнопки проверки у победителя
  requirement: |
    У победившего пользователя должна блокироваться кнопка проверки решения
  prerequisites: |
    Пользователи в игре, один решил задачу
  steps:
    - Написать верное решение
    - Нажать кнопку проверки
    - Подтвердить победу
  expected-result: |
    Кнопка проверки становится неактивной, появляется кнопка «Выйти»

- summary: |
    Проигравший продолжает писать код после завершения игры
  requirement: |
    У проигравшего пользователя должна сохраняться возможность писать код после завершения игры
  prerequisites: |
    Игра завершена, соперник победил
  steps:
    - Нажать в редакторе проигравшего
    - Ввести или изменить код
    - Нажать кнопку проверки
  expected-result: |
    Код редактируется, проверка выполняется

- summary: |
    Завершение игры только после выхода обоих игроков
  requirement: |
    Игра должна завершаться только после выхода обоих игроков
  prerequisites: |
    Игра завершена (есть победитель)
  steps:
    - Первый игрок выходит из игры
    - Второй игрок остаётся в игре
    - Проверить, доступна ли игра второму
    - Второй игрок выходит
  expected-result: |
    После выхода первого — второй всё ещё в игре. После выхода второго — игра закрывается

- summary: |
    Хранение данных игры до выхода обоих игроков
  requirement: |
    Данные об игре должны храниться до полного завершения сессии
  prerequisites: |
    Активная игра
  steps:
    - Один игрок выходит
    - Второй игрок обновляет страницу
    - Второй игрок продолжает игру
    - Второй игрок выходит
  expected-result: |
    После выхода первого — данные сохранены. После выхода второго — данные удалены

- summary: |
    Синхронизация кода в реальном времени
  requirement: |
    Система должна поддерживать синхронизацию кода в реальном времени
  prerequisites: |
    Два игрока в игре
  steps:
    - Первый игрок печатает код в редакторе
    - Второй игрок наблюдает за редактором
  expected-result: |
    Код второго игрока обновляется синхронно с первым

- summary: |
    Восстановление игры по идентификатору
  requirement: |
    Система должна поддерживать восстановление игровой сессии по идентификатору
  prerequisites: |
    Активная игра, известен ID игры
  steps:
    - Закрыть вкладку с игрой
    - Открыть ссылку с ID игры
  expected-result: |
    Игра восстанавливается, код и состояние сохранены

- summary: |
    Отсутствие таймера окончания игры
  requirement: |
    Игра не должна прерываться по таймеру
  prerequisites: |
    Активная игра
  steps:
    - Никто не решает задачу в течение длительного времени
  expected-result: |
    Игра продолжается, никто не выкидывается

- summary: |
    Завершение игры через сдачу
  requirement: |
    У пользователя должна быть возможность сдаться в любой момент игры
  prerequisites: |
    Активная игра
  steps:
    - Найти кнопку «Сдаться»
    - Нажать её
  expected-result: |
    Игра завершается, соперник объявляется победителем
